<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Мій сайт</title>
    <link rel="stylesheet" href="../../static/css/instruction.css" />
  </head>
  <body>
    <header>
      <div class="logo">
        <div class="logo-bg">
          <img src="../../static/img/logo.png" alt="Іконка" />
        </div>
      </div>
      <nav class="navigation">
        <ul>
          <li><a href="{% url 'home' %}">Головна</a></li>
          <li><a href="{% url 'about' %}">Про нас</a></li>
          <li><a href="{%url 'instruction'%}">Інструкція</a></li>
          <li><a href="{%url 'log_in'%}">Вхід</a></li>
          <li><a href="{%url 'sign_up'%}">Реєстрація</a></li>
          <li><a href="{%url 'zayavki'%}">Заявки</a></li>
          
        </ul>
      </nav>
      <div class="profile">
        <a href="{% url 'profile' %}">Профіль</a>
      </div>
    </header>

    <main>
      <section class="instructions-section">
        <h2>Інструкція по користуванню даним сайтом</h2>
        <div class="instruction-blocks">
          <div class="instruction">
            <h3>Для користувача</h3>
            <p>
              Для користувачів, які хочуть подати заявку на допомогу
              Ласкаво просимо! Якщо ви потрапили у складну ситуацію і потребуєте допомоги, ми тут, щоб підтримати вас. Ось як скористатися нашим сайтом:
              <br>Реєстрація<br>
              Зареєструйтесь на сайті, вказавши основну інформацію про себе. Це допоможе волонтерам швидко зрозуміти вашу ситуацію.
              <br>Подання заявки<br>
              Після входу в систему перейдіть у розділ «Подати заявку». Заповніть форму, де опишіть свою проблему, вид допомоги, яка вам потрібна, та контактні дані.
              <br>Очікуйте відповіді<br>
              Ваша заявка буде доступна для перегляду волонтерам, які можуть запропонувати допомогу. Ви отримаєте повідомлення, коли хтось зв’яжеться з вами.
              <br>Спілкування з волонтером<br>
              Коли волонтер погодиться допомогти, ви зможете домовитися про деталі через внутрішній чат або за вказаними контактами.
              <br>Підтвердження отримання допомоги<br>
              Після того, як ви отримали допомогу, рекомендуємо залишити відгук або підтвердження, щоб ми знали, що все пройшло успішно.
            </p>
          </div>
          <div class="instruction">
            <h3>Для волонтера</h3>
            <p>
              Для волонтерів, які хочуть допомагати
              Дякуємо, що хочете допомагати іншим! Наш сайт полегшує процес пошуку тих, хто потребує підтримки. Ось як це працює:
              <br>Реєстрація<br>
              Зареєструйтесь як волонтер, вкажіть свої контактні дані та можливі напрямки допомоги, які ви готові надати.
              <br>Пошук заявок<br>
              У розділі «Заявки на допомогу» ви зможете переглядати актуальні запити від користувачів.
              <br>Обрання заявки<br>
              Оберіть заявку, яку ви можете підтримати, і напишіть користувачу через внутрішній чат або запропонуйте зв’язатися з вами.
              <br>Домовленість про допомогу<br>
              Узгодьте всі деталі безпосередньо з користувачем: час, місце, формат допомоги.
              <br>Підтвердження виконання<br>
              Після того, як ви надали допомогу, рекомендуємо підтвердити це в системі, щоб підтримувати довіру у спільноті.
            </p>
          </div>

        </div>
      </section>

      <section class="support-section">
        <h2>Технічна підтримка</h2>
        <div class="support-container">
          <div class="support-info">
            <h3>Контактна інформація</h3>
            <p><strong>Гаряча лінія:</strong> +38 (0800) 123 456</p>
            <p><strong>Email:</strong> support@kindhelp.org</p>
            <p><strong>Телефон:</strong> +38 (050) 987 65 43</p>
            <p>
              <strong>Графік роботи:</strong><br />Пн-Пт: 09:00–18:00<br />Сб-Нд:
              вихідні
            </p>
          </div>

          <div class="support-form">
            <h3>Форма зворотного зв’язку</h3>
            <div id="successMessage" style="display: none; color: green;">Повідомлення надіслано успішно!</div>
            <div id="errorMessage" style="display: none; color: red;"></div>
        
            <form id="support-form">
              {% csrf_token %}
              <input
                type="text"
                name="name"
                placeholder="Ім'я та прізвище"
                required
              />
              <input
                type="email"
                name="email"
                placeholder="Електронна пошта"
                required
              />
              <input
                type="tel"
                name="phone"
                placeholder="Контактний номер телефону (необов’язково)"
              />
              <textarea
                name="message"
                placeholder="Опишіть проблему"
                rows="5"
                required
              ></textarea>
              <button type="submit">Надіслати</button>
            </form>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <div class="footer-top">
          <div class="footer-logo">
            <div class="logo-bg">
              <img src="../../static/img/logo.png" alt="Іконка" />
            </div>
          </div>
          <div class="social-contacts">
            <div class="social-links">
              <a href="#">Facebook</a> | <a href="#">Instagram</a> |
              <a href="#">Telegram</a>
            </div>
            <p>Email: support@kindhelp.org</p>
            <p>Телефон: +38 (050) 123 45 67</p>
            <p>Адреса: м. Київ, вул. Доброти, 1</p>
          </div>
        </div>
        <div class="footer-bottom">
          <div class="footer-links">
            <a href="{% url 'about' %}">Про нас</a>
            <a href="{%url 'instruction'%}">Часті запитання</a>
            <a href="{% url 'profile' %}">Стати волонтером</a>
            <a href="{%url 'instruction'%}">Подати запит</a>
            <a href="{%url 'instruction'%}">Умови користування</a>
            <a href="{% url 'about' %}">Політика конфіденційності</a>
          </div>
          <div class="copyright">© 2025 KindHelp — Добро поруч.</div>
        </div>
      </div>
    </footer>
    <script>
      document.getElementById("support-form").addEventListener("submit", function(event) {
        event.preventDefault();
        
        const formData = new FormData(this);
        const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        
        // Показати завантаження
        const submitBtn = this.querySelector('button[type="submit"]');
        submitBtn.disabled = true;
        submitBtn.textContent = "Відправка...";
        
        fetch("/contact_support/", {
          method: "POST",
          headers: {
            "X-CSRFToken": csrfToken
          },
          body: formData
        })
        .then(response => {
          if (!response.ok) throw new Error('Помилка мережі');
          return response.json();
        })
        .then(data => {
          if (data.success) {
            document.getElementById("successMessage").style.display = "block";
            document.getElementById("errorMessage").style.display = "none";
            this.reset();
          } else {
            throw new Error(data.error || "Невідома помилка");
          }
        })
        .catch(error => {
          console.error("Помилка:", error);
          document.getElementById("errorMessage").textContent = error.message;
          document.getElementById("errorMessage").style.display = "block";
        })
        .finally(() => {
          submitBtn.disabled = false;
          submitBtn.textContent = "Надіслати";
        });
      });
    </script>
  </body>
  </html>